<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>aliiot</title>

<script type="text/javascript" src="ajax.js"></script>
<script type="text/javascript">

// 以对像来设置数据 
function setByObj(obj)
{
	var e = document.getElementById('sel');
	e.value = obj["en"];
	
	var e = document.getElementById('name');
	e.value = obj["name"];
	
	e = document.getElementById('key');
	e.value = obj["key"];
	
	e = document.getElementById('secret');
	e.value = obj["secret"];
}


function getAliIot()
{
	var options = { url: 'getAliIot', 
	  data: 'en=0', 	
	  success: function(obj) {
			setByObj(obj);			
	  },
	  fail: function(err) {	
	  }
	};	
	ajaxRequest(options);
}


// 网页加载时执行函数	
function pageload() 
{	
	getAliIot();	
}


function checkInput()
{	
	var name = document.getElementById('name').value;
	if (name==null || name=="") {
		alert("DeviceName输入有误，请重新输入!");	return false;
	}
	
	var key = document.getElementById('key').value;
	if (key==null || key=="") {
		alert("ProductKey 输入有误，请重新输入!");	return false;
	}
	
	var secret = document.getElementById('secret').value;
	if (secret==null || secret=="") {
		alert("DeviceSecret输入有误，请重新输入!");	return false;
	}

	var ret = confirm("\n操作确认执行此?\n"); 
	return ret;
}

function setSlave()
{
	var ret = checkInput();
	if(ret) {
		var en = document.getElementById('sel').value;
		var name = document.getElementById('name').value;
		var key = document.getElementById('key').value;
		var secret = document.getElementById('secret').value;
		
		var options = { url: 'setAliIot', 
		  data: 'en={0}&name={1}&key={2}&secret={3}'.format(en, name, key, secret), 	
		  success: function(res) {
		  
		  },
		  fail: function(err) {
				alert("操作失败");		
		  }
		};	
		ajaxRequest(options);
	}	
}


</script>
</head>
<body style="margin:0px; font-size:12px;" onLoad="pageload();">
	
	<table width="700">
		<tr align="left" style="color:#FFFFFF;background:#0054A8; height:22px; font-size:14px;">
			<td colspan="2">Ali IOT配置</td></tr>
		<tr><td ><br /></td><td></td></tr>
				
		<tr> 
			<td >IOT启用:</td>
			<td>
				<select id="sel" style="width:170px;">
					<option value=0>禁用</option>
					<option value=1>启用</option>
				</select>
			</td>
		</tr>
		
		<tr> 
			<td>DeviceName:</td>
			<td><input id="name" type="text" /></td>
		</tr>
		
		<tr> 
			<td>ProductKey:</td>
			<td><input id="key" type="text" /></td>
		</tr>
		  
		<tr>
			<td>DeviceSecret:</td>
			<td><input id="secret" type="text" /> </td>
		</tr>		
		<tr><td><br /></td><td></td></tr>
		
		<tr>
			<td></td>
			<td><input type="button" value="保存" onClick="setSlave();" /></td>			
		</tr>
	</table>
	Iot服务说明：<br />
	请正确填写DeviceName、ProductKey、DeviceSecret<br />
	
	
	
</body>
</html>